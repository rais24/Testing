<script type="text/javascript">

  function add_available_times(data) {
		$.getJSON("<%=available_time_slots_url%>", data, function(response) {
		  var deliveryTimesSelect = $('#order_delivery_time_time_slot').empty();
		  $.each(response, function(i, j) {
			  deliveryTimesSelect.append($('<option></option>').html(j));
		  });
		});
  }

	$(document).ready(function() {
		var selected_day = $("#order_delivery_time_delivery_date").val().split(",")[0].toLowerCase();
		var data = "id=<%=@zone.id%>&selected_day=" + selected_day;
		add_available_times(data);

		$("#order_delivery_time_delivery_date").change( function() {
			selected_day = $(this).val().split(",")[0].toLowerCase();
			data = "id=<%=@zone.id%>&selected_day=" + selected_day;		
			add_available_times(data);
		});		
	});

</script>
